/* Mobile Responsive Styles - Optimized for Samsung S25 Ultra & Modern Phones */
/* Samsung S25 Ultra: 1440 x 3120 px (6.8" display, 19.3:9 ratio) */
/* Effective resolution in portrait: ~412 x 915 CSS pixels */

/* ========================================
   BASE MOBILE FIXES
   ======================================== */

* {
  box-sizing: border-box;
}

html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  width: 100%;
  max-width: 100vw;
  -webkit-text-size-adjust: 100%;
}

/* ========================================
   MODERN TALL PHONES (Samsung S25 Ultra, iPhone 15 Pro Max, etc.)
   Portrait: max-width: 430px (covers most phones)
   ======================================== */

@media screen and (max-width: 430px) {
  
  /* ===== HEADER SECTION ===== */
  
  /* App title */
  body h1[style*="fontSize"] {
    font-size: 1.4rem !important;
    letter-spacing: 0.05em !important;
    margin-bottom: 0.25rem !important;
  }

  /* Subtitle */
  body [style*="Game Master Control Panel"] {
    font-size: 0.75rem !important;
    margin-bottom: 0.75rem !important;
  }

  /* Header button container */
  body > div > div:first-child > div[style*="display: flex"] {
    display: grid !important;
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.5rem !important;
    width: 100% !important;
  }

  /* All header buttons */
  body > div > div:first-child button {
    padding: 0.7rem 0.9rem !important;
    font-size: 0.75rem !important;
    width: 100% !important;
    min-height: 48px !important;
  }

  /* Current Player / Mode / Round displays */
  body [style*="background: rgba(139, 92, 246"] {
    font-size: 0.8rem !important;
    padding: 0.5rem 0.75rem !important;
  }

  /* Round number */
  body [style*="fontSize: 2.5rem"] {
    font-size: 1.6rem !important;
  }

  /* ===== MAIN LAYOUT ===== */

  /* Force single column - target the main container */
  body > div > div[style*="minHeight: 100vh"] {
    display: flex !important;
    flex-direction: column !important;
  }

  /* Players container - single column */
  body [style*="gridTemplateColumns"] {
    display: flex !important;
    flex-direction: column !important;
    gap: 1rem !important;
    width: 100% !important;
  }

  /* Remove max-height from player cards for scrolling */
  body [style*="maxHeight: 85vh"] {
    max-height: none !important;
  }

  /* Hide sidebar on phones - we need the space */
  body [style*="width: 280px"][style*="position: sticky"] {
    display: none !important;
  }

  /* ===== PLAYER CARDS ===== */

  /* Player card width - full width */
  body [style*="width: 48%"],
  body [style*="width: 50%"] {
    width: 100% !important;
    max-width: 100% !important;
  }

  /* Player card padding */
  body [style*="borderRadius: 12px"][style*="padding: 1rem"] {
    padding: 0.75rem !important;
  }

  /* Player name input */
  body input[style*="fontSize: 1.25rem"] {
    font-size: 1rem !important;
    padding: 0.5rem !important;
  }

  /* Remove button (X) */
  body button[style*="fontSize: 1.5rem"][style*="background: transparent"] {
    font-size: 1.2rem !important;
    padding: 0.25rem !important;
  }

  /* Color picker */
  body input[type="color"] {
    width: 28px !important;
    height: 28px !important;
  }

  /* ===== FACTION & COMMANDER ===== */

  /* Faction/Commander row - stack vertically */
  body > div [style*="display: flex"][style*="gap: 0.5rem"] > select {
    width: 100% !important;
    padding: 0.6rem !important;
    font-size: 0.85rem !important;
  }

  /* Commander title */
  body [style*="fontSize: 1.5rem"][style*="color: #d4af37"] {
    font-size: 1.1rem !important;
  }

  /* Cooldown badge */
  body [style*="fontSize: 0.7rem"][style*="padding: 0.25rem"] {
    font-size: 0.65rem !important;
    padding: 0.2rem 0.4rem !important;
  }

  /* ===== HP CONTROLS ===== */

  /* HP text */
  body [style*="fontSize: 1rem"][style*="color: #fde68a"] {
    font-size: 0.9rem !important;
  }

  /* HP +/- buttons */
  body button[style*="width: 60px"][style*="height: 60px"] {
    width: 52px !important;
    height: 52px !important;
    font-size: 1.3rem !important;
    min-width: 52px !important;
    min-height: 52px !important;
  }

  /* ===== REVIVE SECTION ===== */

  /* Revive circles - commander */
  body [style*="width: 2rem"][style*="height: 2rem"][style*="borderRadius: 50%"] {
    width: 1.75rem !important;
    height: 1.75rem !important;
  }

  /* Revive circles - squad */
  body [style*="width: 28px"][style*="height: 28px"][style*="borderRadius: 50%"] {
    width: 26px !important;
    height: 26px !important;
  }

  /* Revive button */
  body button[style*="âŸ² Revive"] {
    padding: 0.65rem 1rem !important;
    font-size: 0.9rem !important;
    min-height: 48px !important;
  }

  /* ===== ACTION BUTTONS ===== */

  /* Commander action buttons - keep 3 columns but smaller */
  body [style*="gridTemplateColumns: repeat(3, 1fr)"] {
    gap: 0.5rem !important;
  }

  body [style*="gridTemplateColumns: repeat(3, 1fr)"] > button {
    padding: 0.75rem 0.4rem !important;
    font-size: 0.75rem !important;
    min-height: 52px !important;
  }

  /* ===== SQUAD SECTION ===== */

  /* Squad title */
  body h3[style*="Squad Members"] {
    font-size: 1rem !important;
    cursor: pointer !important;
  }

  /* Squad unit name input */
  body input[style*="fontSize: 0.9rem"][style*="color: #c4b5fd"] {
    font-size: 0.85rem !important;
    padding: 0.5rem !important;
  }

  /* Squad HP text */
  body [style*="fontSize: 0.85rem"][style*="color: #a78bfa"] {
    font-size: 0.8rem !important;
  }

  /* Squad HP buttons */
  body button[style*="minWidth: 50px"][style*="minHeight: 50px"] {
    min-width: 46px !important;
    min-height: 46px !important;
    font-size: 1.1rem !important;
    padding: 0.65rem 1rem !important;
  }

  /* Squad action buttons */
  body [style*="gridTemplateColumns: repeat(2, 1fr)"] > button[style*="minHeight: 54px"] {
    min-height: 50px !important;
    padding: 0.8rem !important;
    font-size: 0.8rem !important;
  }

  /* ===== MODALS ===== */

  /* All modals - full screen on phones */
  body [style*="position: fixed"][style*="display: flex"][style*="zIndex: 1000"] > div {
    max-width: 96% !important;
    width: 96% !important;
    padding: 1.25rem !important;
    max-height: 92vh !important;
    overflow-y: auto !important;
  }

  /* Calculator modals (D20, Damage Distribution) */
  body [style*="maxWidth: 1200px"],
  body [style*="maxWidth: 1000px"] {
    max-width: 96% !important;
    width: 96% !important;
  }

  /* Modal titles */
  body [style*="position: fixed"] h3 {
    font-size: 1.25rem !important;
    margin-bottom: 0.75rem !important;
  }

  /* Modal content scrolling */
  body [style*="maxHeight: 80vh"] {
    max-height: 70vh !important;
    overflow-y: auto !important;
  }

  /* Revive modal */
  body [style*="ðŸŽ² Revive Roll"] {
    font-size: 1.4rem !important;
  }

  /* Revive modal buttons */
  body [style*="maxWidth: 300px"][style*="âœ“ Successful"],
  body [style*="maxWidth: 300px"][style*="âœ— Unsuccessful"] {
    max-width: 100% !important;
    padding: 1rem 1.5rem !important;
    font-size: 1rem !important;
    min-height: 52px !important;
  }

  /* ===== SAVE/LOAD BUTTONS ===== */

  /* Save/Load container - stack vertically */
  body [style*="justifyContent: space-between"] {
    flex-direction: column !important;
  }

  body [style*="justifyContent: space-between"] > div:last-child {
    display: flex !important;
    flex-direction: column !important;
    width: 100% !important;
    gap: 0.5rem !important;
  }

  body button[style*="ðŸ’¾ SAVE"],
  body button[style*="ðŸ“‚ LOAD"] {
    width: 100% !important;
    margin: 0 !important;
  }

  /* ===== ADD PLAYER BUTTON ===== */

  body button[style*="+ ADD PLAYER"] {
    padding: 0.85rem 1.5rem !important;
    font-size: 0.9rem !important;
    width: 100% !important;
    max-width: 400px !important;
  }

  /* ===== PREVENT OVERSCROLL ===== */

  body {
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }
}

/* ========================================
   LARGER PHONES (max-width: 768px)
   For slightly larger phones or tablets in portrait
   ======================================== */

@media screen and (max-width: 768px) and (min-width: 431px) {
  
  /* Still single column but with more breathing room */
  body [style*="gridTemplateColumns"] {
    display: flex !important;
    flex-direction: column !important;
    gap: 1rem !important;
  }

  /* Hide sidebar */
  body [style*="width: 280px"][style*="sticky"] {
    display: none !important;
  }

  /* Header buttons - 3 columns */
  body > div > div:first-child > div[style*="display: flex"] {
    display: grid !important;
    grid-template-columns: repeat(3, 1fr) !important;
    gap: 0.5rem !important;
  }

  /* Modals - slightly larger */
  body [style*="position: fixed"] > div {
    max-width: 90% !important;
    width: 90% !important;
  }
}

/* ========================================
   LANDSCAPE MODE (height < 500px)
   ======================================== */

@media screen and (max-height: 500px) and (orientation: landscape) {
  
  /* Compact everything vertically */
  body h1 {
    font-size: 1.1rem !important;
    margin-bottom: 0.25rem !important;
  }

  body [style*="fontSize: 2.5rem"] {
    font-size: 1.3rem !important;
  }

  body [style*="marginBottom"] {
    margin-bottom: 0.4rem !important;
  }

  /* Modals - full height scrolling */
  body [style*="position: fixed"] > div {
    max-height: 95vh !important;
    overflow-y: auto !important;
  }

  /* Player cards - remove height limits */
  body [style*="maxHeight: 85vh"] {
    max-height: none !important;
  }
}

/* ========================================
   EXTRA TALL SCREENS (iPhone 15 Pro Max, etc.)
   ======================================== */

@media screen and (min-height: 850px) and (max-width: 430px) {
  
  /* Can afford slightly larger elements */
  body h1 {
    font-size: 1.6rem !important;
  }

  body button {
    padding: 0.85rem 1.1rem !important;
  }

  /* Player cards can breathe more */
  body [style*="padding: 0.75rem"] {
    padding: 1rem !important;
  }
}

/* ========================================
   PREVENT HORIZONTAL SCROLL - CRITICAL
   ======================================== */

html, body {
  overflow-x: hidden !important;
  width: 100% !important;
  max-width: 100vw !important;
}

body > * {
  max-width: 100vw !important;
}

/* Fix radial gradient backgrounds on mobile */
@media screen and (max-width: 768px) {
  body [style*="radial-gradient"] {
    background-attachment: scroll !important;
  }
}